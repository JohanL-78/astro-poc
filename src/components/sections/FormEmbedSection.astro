---
import { stegaClean } from '@sanity/client/stega';

interface Props {
  section: any;
}

const { section } = Astro.props;
const formId = stegaClean(section.tallyFormId);
---

<section class="form-embed-section">
  {section.heading && <h2>{section.heading}</h2>}
  {section.description && <p class="description">{section.description}</p>}
  {formId && (
    <div class="form-container">
      <iframe
        data-tally-src={`https://tally.so/embed/${formId}?alignLeft=1&hideTitle=1&transparentBackground=1`}
        loading="lazy"
        width="100%"
        height="500"
        frameborder="0"
        title="Form"
      ></iframe>
      <script is:inline src="https://tally.so/widgets/embed.js"></script>
    </div>
  )}
</section>

<style>
  .form-embed-section {
    padding: var(--space-3xl) var(--space-xl);
    max-width: 800px;
    margin: 0 auto;
  }

  h2 {
    font-size: var(--text-4xl);
    text-align: center;
    margin-bottom: var(--space-md);
  }

  .description {
    text-align: center;
    color: var(--color-text-light);
    margin-bottom: var(--space-xl);
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
  }

  .form-container {
    min-height: 500px;
  }

  iframe {
    border: none;
    width: 100%;
  }
</style>
